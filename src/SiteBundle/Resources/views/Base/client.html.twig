{% extends 'base.html.twig' %}

{% block body %}



    {% if app.request.query.get('c') == 'fun' %}
        active-centrale
    {% endif %}

    <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="x_panel">
                <div class="x_title">
                    <h2>Clients</h2>

                    <div class="clearfix"></div>
                </div>
                <div class="ation-toolbox">
                    <div class="ui equal width grid">
                        <div class="equal width row">

                            <div class="column">

                                <button class="ui button green" id="btn-new-cl" role="button">Ajouter un nouveau client

                                </button>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="ui divider"></div>


                <div class="x_content ">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12 text-center ">
                            <ul class="pagination pagination-split">
                                <li class="{% if app.request.query.get('c') == 'all' %}active-centrale{% endif %}">
                                    <a href="{{ path("client", { "c" : "all"}) }}">
                                        <img
                                                data-centrale="all"
                                                class="cursor  img-circle img-centrale"
                                                src="{{ asset('images/logo-centrale/logo-all.png') }}">
                                    </a>
                                </li>
                                <li class="{% if app.request.query.get('c') == 'fun' %}active-centrale{% endif %}">
                                    <a href="{{ path("client", { "c" : "fun"}) }}">
                                        <img
                                                data-centrale="CENTRALE_FUNECAP"
                                                class="cursor img-centrale"
                                                src="{{ asset('images/logo-centrale/logo-centrale-funecap.png') }}">
                                    </a>
                                </li>
                                <li class="{% if app.request.query.get('c') == 'roc' %}active-centrale{% endif %}">
                                    <a href="{{ path("client", { "c" : "roc"}) }}">
                                        <img
                                                data-centrale="CENTRALE_ROC_ECLERC"
                                                class="cursor img-centrale"
                                                src="{{ asset('images/logo-centrale/logo-centrale-roc.png') }}">
                                    </a>
                                </li>
                                <li class="{% if app.request.query.get('c') == 'ac' %}active-centrale{% endif %}">
                                    <a href="{{ path("client", { "c" : "ac"}) }}">
                                        <img
                                                data-centrale="achat-centrale"
                                                class="cursor img-centrale"
                                                src="{{ asset('images/logo-centrale/logo-ac.png') }}">
                                    </a></li>
                                <li class="{% if app.request.query.get('c') == 'gccp' %}active-centrale{% endif %}">
                                    <a href="{{ path("client", { "c" : "gccp"}) }}">
                                        <img
                                                data-centrale="centrale-gccp"
                                                class="cursor img-centrale"
                                                src="{{ asset('images/logo-centrale/logo-centrale-gccp.png') }}"></a>
                                </li>
                                <li class="{% if app.request.query.get('c') == 'pfpl' %}active-centrale{% endif %}">
                                    <a href="{{ path("client", { "c" : "pfpl"}) }}">
                                        <img
                                                data-centrale="centrale-pfpl"
                                                class="cursor img-centrale"
                                                src="{{ asset('images/logo-centrale/logo-pfpl.jpg') }}">

                                    </a></li>
                            </ul>
                        </div>

                        <div class="clearfix"></div>

                        <div class="client-all">


                            <table id="client-all" class="display hover" cellspacing="0" width="100%">
                                <thead>
                                <tr>
                                    <th>Réf</th>
                                    <th>Centrale</th>
                                    <th>Raison Sociale</th>
                                    <th>Adresse</th>
                                    <th>Tel</th>
                                    <th>Siret</th>
                                    <th>Etat</th>
                                </tr>
                                </thead>
                                <tfoot>
                                <tr>
                                    <th>Réf</th>
                                    <th>Centrale</th>
                                    <th>Raison Sociale</th>
                                    <th>Adresse</th>
                                    <th>Tel</th>
                                    <th>Siret</th>
                                    <th>Etat</th>
                                </tr>
                                </tfoot>

                                <tbody>
                                {% for cl in client %}
                                    {% if centrale == "all" %}
                                        <tr data-centrale="{{ cl.SO_RAISONSOC }}" data-id="{{ cl.CL_ID }}"
                                            class="cursor go-to-client">
                                            <td>{{ cl.CL_REF }}</td>
                                            <td>{{ cl.SO_RAISONSOC }}</td>
                                            <td>{{ cl.CL_RAISONSOC |  convert_encoding('UTF-8', 'Windows-1252') }}</td>
                                            <td>{{ cl.CL_CP }} {{ cl.CL_VILLE |  convert_encoding('UTF-8', 'Windows-1252') }}</td>
                                            <td>{{ cl.CL_TEL | phone }}</td>
                                            <td>{{ cl.CL_SIRET | siret }}</td>
                                            <td>{{ cl.CL_STATUS | status | raw }}</td>
                                        </tr>

                                    {% else %}

                                        <tr data-centrale="{{ centrale }}" data-id="{{ cl.CL_ID }}"
                                            class="cursor go-to-client">
                                            <td>{{ cl.CL_REF }}</td>
                                            <td>{{ centrale }}</td>
                                            <td>{{ cl.CL_RAISONSOC |  convert_encoding('UTF-8', 'Windows-1252') }}</td>
                                            <td>{{ cl.CL_CP }} {{ cl.CL_VILLE |  convert_encoding('UTF-8', 'Windows-1252') }}</td>
                                            <td>{{ cl.CL_TEL | phone }}</td>
                                            <td>{{ cl.CL_SIRET | siret }}</td>
                                            <td>{{ cl.CL_STATUS | status | raw }}</td>
                                        </tr>


                                    {% endif %}
                                {% endfor %}
                                </tbody>
                            </table>


                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- /page content -->


    <div class="modal fade" id="modal-insert-client-new" tabindex="-1" role="dialog"
         aria-labelledby="modal-insert-client-new">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Choississez la centrale</h4>
                </div>
                <div class="modal-body">
                    <p>Pour ajouter un nouveau client, choisir d'abord la centrale</p>

                    <div class="col-md-12 col-sm-12 col-xs-12 text-center ">
                        <ul class="pagination pagination-split">
                            <li><a href="{{ path('client-new', { 'centrale' : 2}) }}">
                                    <img
                                            data-centrale="CENTRALE_FUNECAP"
                                            class="cursor img-centrale-new-client"
                                            src="{{ asset('images/logo-centrale/logo-centrale-funecap.png') }}">
                                </a>
                            </li>
                            <li><a href="{{ path('client-new', { 'centrale' : 1}) }}">
                                    <img
                                            data-centrale="CENTRALE_ROC_ECLERC"
                                            class="cursor img-centrale-new-client"
                                            src="{{ asset('images/logo-centrale/logo-centrale-roc.png') }}">
                                </a>
                            </li>
                            {#<li><a href="{{ path('client-new', { 'centrale' : 3}) }}">#}
                            {#<img#}
                            {#data-centrale="achat-centrale"#}
                            {#class="cursor img-centrale-new-client"#}
                            {#src="{{ asset('images/logo-centrale/logo-ac.png') }}">#}
                            {#</a></li>#}

                        </ul>
                    </div>
                </div>
                <div class="modal-footer">

                </div>
            </div>
        </div>
    </div>





{% endblock %}

